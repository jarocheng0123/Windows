import"./modulepreload-polyfill-B5Qt9EMX.js";import"./main-C9DFL4CK.js";var c="1998-01-01 00:00:00",h="2035-01-01 00:00:00",s=[c,h];function y(){var n=window.parent.location.href,a=new URL(n),t=a.pathname,o=t.split("/"),e=o[o.length-1];return e}var i=y();function d(n){fetch("http://127.0.0.1:21314/month_count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wxid:i,time_range:n})}).then(t=>t.json()).then(t=>{var o=echarts.init(document.getElementById("echarts-month_count")),e=t.chart_data;e=JSON.parse(e),e.toolbox.show=!1,o.setOption(e)})}function u(n){fetch("http://127.0.0.1:21314/hour_count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wxid:i,time_range:n})}).then(t=>t.json()).then(t=>{var o=echarts.init(document.getElementById("echarts-hours")),e=t.chart_data;e=JSON.parse(e),e.toolbox.show=!1,o.setOption(e)})}function p(n){fetch("http://127.0.0.1:21314/wordcloud",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wxid:i,time_range:n})}).then(t=>t.json()).then(t=>{var o=echarts.init(document.getElementById("echarts-wordcloud")),e=t.chart_data;e=JSON.parse(e),e.toolbox.show=!1,o.setOption(e)})}function m(n){fetch("http://127.0.0.1:21314/message_counter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wxid:i,time_range:n})}).then(t=>t.json()).then(t=>{var o=echarts.init(document.getElementById("echarts-sender")),r=t.chart_data_sender;r=JSON.parse(r),r.toolbox.show=!1,o.setOption(r);var e=echarts.init(document.getElementById("echarts-types")),r=t.chart_data_types;r=JSON.parse(r),r.toolbox.show=!1,e.setOption(r);var l=echarts.init(document.getElementById("echarts-weekday")),r=t.chart_data_weekday,r=JSON.parse(r);r.toolbox.show=!1,l.setOption(r)})}m(s);d(s);p(s);u(s);layui.define(["element","layer"],function(n){var a=jQuery=layui.jquery;layui.element;var t=layui.layer;echarts.init(document.getElementById("ECharts01"));var o={chart2:function(e){a(this).offset().top,a(this).offset().left,t.open({title:"📝 再见",type:2,area:["800px","calc(100% - 50px)"],anim:2,resize:!1,closeBtn:1,shadeClose:!0,maxmin:!0,skin:"yourclass",content:"./chart.html?wxid="+i+"&type="+e})}};a(document).on("click","*[lay-event]",function(){var e=a(this).attr("lay-event"),l=a(this).attr("lay-data");typeof o[e]=="function"&&o[e].apply(this,[l])}),n("yadmin",o)});const f={wxid:i};fetch("http://127.0.0.1:21314/first_message",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(f)}).then(n=>n.json()).then(n=>{var a=n;console.log("Contact:",a);var t=document.getElementById("first_time");t.innerText=a.first_time});layui.use(["jquery"],function(){layui.jquery,window.addEventListener("message",function(n){var a=n.data;if(a.type==="setDate"){if(console.log("接收的日期为："+a.value),a.value){var t=a.value.split(" - ");c=t[0]+" 00:00:00",h=t[1]+" 23:59:59",s=[c,h]}else c="1998-01-01 00:00:00",h="2035-01-01 00:00:00",s=[c,h];console.log(s),m(s),d(s),p(s),u(s)}})});
